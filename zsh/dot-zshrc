#!/usr/bin/env zsh

# Neovim config
export PATH="$PATH:/opt/nvim-linux-x86_64/bin"
export PATH="$PATH:$HOME/nvim/bin" # for the school
export EDITOR="nvim"

# History
HISTFILE=~/.histfile
HISTSIZE=1000
SAVEHIST=1000
setopt hist_ignore_dups
setopt hist_reduce_blanks

# Antidote
[ -f ~/.antidote/antidote.zsh ] || git clone --depth=1 https://github.com/mattmc3/antidote.git ~/.antidote
source ~/.antidote/antidote.zsh
antidote load

# Completion
autoload -Uz compinit && compinit
setopt globdots

# Prompt
autoload -Uz promptinit && promptinit
setopt prompt_subst
function update_prompt {
	PROMPT=$''
	PROMPT+=$'%B%n%b'
	PROMPT+=$':'
	PROMPT+=$'%~'
	PROMPT+=$'%B$%b'
	PROMPT+=$' '
}
update_prompt

# Cli
bindkey -v
autoload -U edit-command-line && zle -N edit-command-line

export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"

function fzd() {
	local dir=${1:-"."}
	local selected="$(find "${dir}" -type f,d 2>/dev/null | fzf)"
	if [ -z "${selected}" ]; then return; fi
	if [ -f "${selected}" ]; then selected="$(dirname "${selected}")"; fi
	cd "$selected"
}
